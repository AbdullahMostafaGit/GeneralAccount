@using ICP_ABC.Extentions;
@using ICP_ABC.Areas.GroupsRights.Models;

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title | E A L B</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <link href="~/Content/Chosen/chosen.min.css" rel="stylesheet" />
    <link href="~/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
    @*<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>*@
    <style>
        .dropdown-submenu {
            position: relative;
        }

            .dropdown-submenu > .dropdown-menu {
                top: 0;
                left: 100%;
                margin-top: -6px;
                margin-left: -1px;
                -webkit-border-radius: 0 6px 6px 6px;
                -moz-border-radius: 0 6px 6px;
                border-radius: 0 6px 6px 6px;
            }

            .dropdown-submenu:hover > .dropdown-menu {
                display: block;
            }

            .dropdown-submenu > a:after {
                display: block;
                content: " ";
                float: right;
                width: 0;
                height: 0;
                border-color: transparent;
                border-style: solid;
                border-width: 5px 0 5px 5px;
                border-left-color: #ccc;
                margin-top: 5px;
                margin-right: -10px;
            }

            .dropdown-submenu:hover > a:after {
                border-left-color: #fff;
            }

            .dropdown-submenu.pull-left {
                float: none;
            }

                .dropdown-submenu.pull-left > .dropdown-menu {
                    left: -100%;
                    margin-left: 10px;
                    -webkit-border-radius: 6px 0 6px 6px;
                    -moz-border-radius: 6px 0 6px 6px;
                    border-radius: 6px 0 6px 6px;
                }
    </style>

    @RenderSection("Styles", required: false)

</head>
<body class="container-fluid " id="DarkMood">
    <div class="row">
        <div>
            <img src="~/Content/Images/elab.png" style="
                     background-repeat: no-repeat;
                     background-size:100% 100%;
                     width: 100vw;
                     height:120px;
                     top:0px;
                " class=" navbar-expand-lg navbar-expand-md" />
        </div>
    </div>

    <nav class="navbar row  navbar-expand-md navbar-dark bg-primary sticky-top" style="margin-bottom:10px ">
        <a class="navbar-brand" href="/Home/Home/Index" style="font:bold"><strong style="font-family:Arial">E A L B</strong></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/Home/Home/Index">
                        Home <span class="sr-only">
                            <i class="fa fa-home"></i>
                        </span>
                    </a>
                </li>
                @{
                    List<GroupRight> groupRights = ViewBag.Rights;
                }
                @if (User.Identity.IsAuthenticated)
                {

                    <li class="nav-item dropdown " id="Setup" style="cursor: pointer;">

                        <a class="nav-link dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Setup
                        </a>
                        <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">

                            <li class="dropdown-submenu">
                                <a class="dropdown-item" tabindex="-1" href="#">Users</a>
                                <ul class="dropdown-menu">
                                    <a class="dropdown-item" tabindex="-1" href="/Account/Account/Index">User Profile</a>
                                    <a class="dropdown-item" href="/Group/Group/Index">User Group</a>
                                    <a class="dropdown-item" href="/GroupsRights/GroupRight/Index">Group Rights</a>
                                    <a class="dropdown-item" href="/FundRights/FundRight">Fund Rights</a>
                                    <a class="dropdown-item" href="#">Report Rights</a>
                                </ul>

                            </li>
                            <li class="dropdown-divider"></li>
                            <li class="dropdown-submenu">
                                <a class="dropdown-item" tabindex="-1" href="#">Out Going Setups</a>
                                <ul class="dropdown-menu">
                                    <a class="dropdown-item" href="/Bank_SetUp/BankSetUpModels/Index">Bank </a>
                                    <a class="dropdown-item" href="/CustomersGroups/CustomersGroup/index">Customers Group</a>
                                    <a class="dropdown-item" href="/AssignCusToGroup/Assign/Index">AssignCusToGroup</a>
                                    <a class="dropdown-item" href="/FeesSetup/Fees/Index">Fees</a>
                                    <a class="dropdown-item" href="/SpecialFees/SpecialFees/index">SpecialFees</a>
                                </ul>

                            </li>
                        </ul>

                    </li>
                    <li class="nav-item dropdown " id="UsersScreens" style="cursor: pointer;">
                        <a class="nav-link dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Users Screens
                        </a>
                        <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">

                            <li class="dropdown-submenu">
                                <a class="dropdown-item" tabindex="-1" href="#">Out Going</a>
                                <ul class="dropdown-menu">
                                    <a class="dropdown-item" tabindex="-1" href="/SwiftOrder/SwiftOrder/CreateOrderByBranchEmp">Branch employee</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/MakerIndex">Maker</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/IndexForBackOffice">Back Office</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/FirstVerifyIndex">Verify One</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/SecondVerifyIndex">Verify Two</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/SwiftOrderHomeForAdmin">Releaser</a>
                                    <a class="dropdown-item" href="/SwiftOrder/SwiftOrder/IndexForBackOffice">Comp lice</a>
                                </ul>

                            </li>
                            <li class="dropdown-divider"></li>
                            <li class="dropdown-submenu">
                                <a class="dropdown-item" tabindex="-1" href="#">Other Screens</a>
                                @*<ul class="dropdown-menu">
                                    <a class="dropdown-item" href="/Bank_SetUp/BankSetUpModels/Index">Bank </a>
                                    <a class="dropdown-item" href="/AssignCusToGroup/Assign/Index">AssignCusToGroup</a>
                                    <a class="dropdown-item" href="/CustomersGroups/CustomersGroup/index">Customers Group</a>
                                    <a class="dropdown-item" href="/FeesSetup/Fees/Index">Fees</a>
                                    <a class="dropdown-item" href="/SpecialFees/SpecialFees/index">SpecialFees</a>
                                    <a class="dropdown-item" href="#">..</a>
                                </ul>*@

                            </li>
                        </ul>

                    </li>
                }

            </ul>

            <ul id="dd" class="navbar-nav mr-4 text-light text-lg-center font-weight-bolder"> Now Time... </ul>

            <ul class="navbar-nav mr-md-4">

                @Html.Partial("_LoginPartial")

            </ul>

        </div>
    </nav>


    <div class="container body-content">
        <br />
        @RenderBody()
        <hr />
        <footer>

            <p>&copy; @DateTime.Now.Year M.R.Soft</p>
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
    <script src="~/Scripts/chosen.jquery.min.js"></script>
    @section scripts{
        @Scripts.Render("~/bundles/jqueryval")

    }
    <script>
        setInterval(function () {
            var date = new Date();
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            minutes = minutes < 10 ? '0' + minutes : minutes;
            var strTime = hours + ':' + minutes + ' ' + ampm;
            document.getElementById("dd").innerHTML = strTime;
        }, 5000);

    </script>

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
    <script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
    <script src="~/signalr/hubs" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {

            // Proxy created on the fly
            var cus = $.connection.cusHub;

            // Declare a function on the job hub so the server can invoke it
            cus.client.displayCustomer = function () {
                getData();
            };

            // Start the connection
            $.connection.hub.start();
            getData();

        });

        function getData() {
            var $tbl = $('#tblInfo');
            $.ajax({
                url: '/Transaction/PT_103PEG/Get',
                type: 'GET',
                datatype: 'json',
                success: function (data) {
                    $tbl.empty();

                    $.each(data.listCus, function (i, model) {
                        $tbl.append
                            (
                            '<tr>' +
                            '<td>' + model.Id + '</td>' +
                            '<td>' + model.CusId + '</td>' +
                            '<td>' + model.CusName + '</td>' +
                            '<tr>'
                            );
                    });
                }
            });
        }

    </script>
</body>
</html>
